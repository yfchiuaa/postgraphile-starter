"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.orderByAscDesc = void 0;
function makeAddPgTableOrderByPlugin(schemaName, tableName, ordersGenerator, hint = `Adding orders with makeAddPgTableOrderByPlugin to "${schemaName}"."${tableName}"`) {
    const displayName = `makeAddPgTableOrderByPlugin_${schemaName}_${tableName}`;
    const plugin = builder => {
        builder.hook("GraphQLEnumType:values", (values, build, context) => {
            const { extend } = build;
            const { scope: { isPgRowSortEnum, pgIntrospection: table }, } = context;
            if (!isPgRowSortEnum ||
                !table ||
                table.kind !== "class" ||
                table.namespaceName !== schemaName ||
                table.name !== tableName) {
                return values;
            }
            const newValues = ordersGenerator(build);
            return extend(values, newValues, hint);
        });
    };
    plugin.displayName = displayName;
    return plugin;
}
exports.default = makeAddPgTableOrderByPlugin;
function orderByAscDesc(baseName, columnOrSqlFragment, unique = false) {
    return {
        [`${baseName}_ASC`]: {
            value: {
                alias: `${baseName}_ASC`,
                specs: [[columnOrSqlFragment, true]],
                unique,
            },
        },
        [`${baseName}_DESC`]: {
            value: {
                alias: `${baseName}_DESC`,
                specs: [[columnOrSqlFragment, false]],
                unique,
            },
        },
    };
}
exports.orderByAscDesc = orderByAscDesc;
//# sourceMappingURL=makeAddPgTableOrderByPlugin.js.map